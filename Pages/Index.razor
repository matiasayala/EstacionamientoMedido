@page "/index"


@inject InfraccionesService infraccionesService


<h1>Hello, world!</h1>

Welcome to your new app.

@*<SurveyPrompt Title="How is Blazor working for you?" />*@

<div class="card-body p-1">
    @if (infraccionesList == null)
    {
        <div class="text-center mt-5 mb-5">
            <div class="spinner-border" role="status">
                <span class="sr-only" />
            </div>
        </div>
    }
    else if (!infraccionesList.Any())
    {
        <div class="text-center mt-5 mb-5">
            <p class="text m-0 p-0 font-weight-bold">No se encontraron registros</p>
        </div>
    }
    else
    {
            <table class="table-auto">
                <thead>
                    <tr>
                        <th>Tipo</th>
                        <th>Direccion</th>
                        <th>Monto</th>
                        <th>Hora Registro</th>
                        <th>Hora Actualizacion</th>
                        <th>Acarreo</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var infraccion in infraccionesList)
                    {
                        <tr>
                            <td>@infraccion.TipoInfraccion</td>
                            <td>@infraccion.DireccionRegistrada</td>
                            <td>@infraccion.MontoAPagar</td>
                            <td>@infraccion.FechaHoraRegistro</td>
                            <td>@infraccion.FechaHoraActualizacion</td>
                            @if (infraccion.Deposito != null)
                            {
                                <td><i class="fa fa-check text-success text" /></td>
                            }
                            else
                            {
                                <td><i class="fa fa-times text-danger text" /></td>
                            }
                            <td>@infraccion.FechaHoraActualizacion</td>
                            <td class="text-center">
                                <button class="btn fa fa-info-circle bg-transparent text-info pr-1 pl-1" data-toggle="tooltip" title="Ver Detalles"></button>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
    }
</div>


@code{
    private List<InfraccionApi> infraccionesList;

    protected override async Task OnInitializedAsync()
    {
        await Task.Delay(4000);
        infraccionesList = await infraccionesService.GetInfracciones("ABC123");

    }

}